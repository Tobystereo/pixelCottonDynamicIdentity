function setLogoSize(){logoContainer=document.getElementById("logoContainer"),logo_width=logoContainer.offsetWidth,logo_height=logoContainer.offsetHeight}function findGameIndexByName(e){for(var o=0;o<games.length;o++)if(e.toLowerCase()==games[o].name.toLowerCase()){return o;break}}function generateElement(e){if(console.log("index: "+index),null!=index){var o=numShards.map(0,100,.4,1e-4),n=Math.random()*o,t=Math.random();t=t>.7?3:2;var a=Math.random()*t;a=Math.floor(a);var i=new THREE.TetrahedronGeometry(n,a),r=games[index].r,s=games[index].g,g=games[index].b,d=new THREE.Color(r,s,g),l=new THREE.MeshPhongMaterial({color:d,shininess:1e3,shading:THREE.FlatShading,wireframe:!0,wireframeLinewidth:2,reflectivity:10}),m=new THREE.Mesh(i,l);shardRotation.push(Math.random(-3,3));var h=Math.random()+.5,_=.5*Math.random()+.75,c=.5*Math.random()+1;m.position.set(h,_,c),shards.push(m),scene.add(m)}}function getMousePosition(e){void 0==e&&(e=window.event),e.pageX||e.pageY?(mouse_x_pos=e.pageX,mouse_y_pos=e.pageY):(e.clientX||e.clientY)&&(mouse_x_pos=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,mouse_y_pos=e.clientY+document.body.scrollTop+document.documentElement.scrollTop)}function rotateShards(){for(var e=0;e<shards.length;e++)shards[e].rotation.x-=SPEED*shardRotation[e],shards[e].rotation.y-=SPEED,shards[e].rotation.z-=SPEED*shardRotation[e]}Number.prototype.map=function(e,o,n,t){return(this-e)*(t-n)/(o-e)+n};var logoContainer,logo_width,logo_height;setLogoSize();var renderer=new THREE.WebGLRenderer({antialias:!0,alpha:!0});renderer.setSize(logo_width,logo_height);var scene=new THREE.Scene,camera=new THREE.PerspectiveCamera(45,logo_width/logo_height,.01,1e3);camera.position.x=1,camera.position.y=1,camera.position.z=3;var shards=[],games_mentioned_in_body_tag=document.body.getAttribute("data-games"),games_on_page=games_mentioned_in_body_tag.split(",");console.log("games_on_page: "+games_on_page),console.log(games_on_page.length),console.log(games_on_page);var numShards=games_on_page.length,shardRotation=[];if(games_on_page.length>0){console.log("there are games mentioned in the body tag");for(var i=0;i<games_on_page.length;i++){games_on_page[i]=games_on_page[i].replace(/ +?/g,"");var index=findGameIndexByName(games_on_page[i]);generateElement(index)}}else for(var i=0;i<games.length;i++)generateElement(i);var onRenderFcts=[],light_ambient=new THREE.AmbientLight(2039325);scene.add(light_ambient);var light_01=new THREE.PointLight(986895,.1,100);light_01.position.set(50,-50,-5),scene.add(light_01);var light_02=new THREE.PointLight(5592405,.1,100);light_02.position.set(-50,50,50),scene.add(light_02);var light_03=new THREE.PointLight(5592405,.1,100);light_03.position.set(-50,50,-50),scene.add(light_03);var light_mouse=new THREE.PointLight(3355443,.1,100);scene.add(light_mouse);var image="logo_white_outline.png",loader=new THREE.TextureLoader;loader.load(image,function(e){var o=new THREE.PlaneGeometry(.5,.5/1.904761905),n=new THREE.MeshBasicMaterial({map:e,overdraw:.5,transparent:!0}),t=new THREE.Mesh(o,n);t.position.x=1,t.position.y=1.1,t.position.z=2,scene.add(t)}),window.addEventListener("resize",function(){setLogoSize(),renderer.setSize(logo_width,logo_height),camera.aspect=logo_width/logo_height,camera.updateProjectionMatrix()},!1),document.onmousemove=getMousePosition;var mouse_x_pos=0,mouse_y_pos=0;onRenderFcts.push(function(){logoContainer.scrollTop+logo_height>=document.body.scrollTop&&(rotateShards(),light_mouse.position.set(mouse_x_pos.map(0,window.innerWidth,-50,50),mouse_y_pos.map(0,window.innerHeight,50,-50),80),renderer.render(scene,camera))});var rendererDomElement=renderer.domElement;logoContainer.appendChild(rendererDomElement);var lastTimeMsec=null;requestAnimationFrame(function e(o){requestAnimationFrame(e),lastTimeMsec=lastTimeMsec||o-1e3/60;var n=Math.min(200,o-lastTimeMsec);lastTimeMsec=o,onRenderFcts.forEach(function(e){e(n/1e3,o/1e3)})});var SPEED=.01,border_color;if(1==games_on_page.length){var i=findGameIndexByName(games_on_page[0]);border_color=games[i].color;for(var cards=document.getElementsByClassName("card"),j=0;j<cards.length;j++)cards[j].style.borderColor=border_color}