function setLogoSize(){logoContainer=document.getElementById("logoContainer"),logo_width=1004,logo_height=650;var e=document.getElementById("canvasWidth").value,t=document.getElementById("canvasHeight").value;e>0&&t>0&&(logo_width=e,logo_height=t)}function findGameIndexByName(e){for(var t=0;t<games.length;t++)if(e.toLowerCase()==games[t].name.toLowerCase()){return t;break}}function getText(){var e=document.getElementById("textfield").value;e=e.toLowerCase(),e=e.replace("/[A-Za-z0-9 -_.À-ÖØ-öø-ÿ]",""),chars=e.split(""),numShards=chars.length>0?chars.length:5}function hslToRgb(e,t,o){var n,r,a;if(0==t)n=r=a=o;else{var i=function h(e,t,o){return 0>o&&(o+=1),o>1&&(o-=1),1/6>o?e+6*(t-e)*o:.5>o?t:2/3>o?e+(t-e)*(2/3-o)*6:e},s=.5>o?o*(1+t):o+t-o*t,d=2*o-s;n=i(d,s,e+1/3),r=i(d,s,e),a=i(d,s,e-1/3)}return[Math.round(255*n),Math.round(255*r),Math.round(255*a)]}function generateImagefromCanvas(){var e,t,o=document.getElementById("outputContainer");try{for(e=renderer.domElement.toDataURL();o.hasChildNodes();)o.removeChild(o.lastChild)}catch(n){return void alert("Sorry, this browser does not support taking screenshot of 3d context. Try Safari or Chrome.")}t=document.createElement("img"),t.setAttribute("class","outputImage"),t.src=e,o.appendChild(t)}function init(){setLogoSize(),renderer=new THREE.WebGLRenderer({antialias:!0,alpha:!0,preserveDrawingBuffer:!0}),renderer.setSize(logo_width,logo_height),scene=new THREE.Scene,camera=new THREE.PerspectiveCamera(45,logo_width/logo_height,.01,1e3),camera.position.x=1,camera.position.y=1,camera.position.z=3;for(var e=0;e<chars.length;e++){var t=chars[e].charCodeAt(0);if(t=parseInt(t),t>=97&&122>=t)var o=t.map(97,122,0,1);else{console.log("not a lowercase character or an umlaut");var o=Math.random()}var n=hslToRgb(o,1,.46);generateElement(e,n,o)}light_ambient=new THREE.AmbientLight(2039325),scene.add(light_ambient),light_01=new THREE.PointLight(986895,.1,100),light_01.position.set(50,-50,-5),scene.add(light_01),light_02=new THREE.PointLight(5592405,.1,100),light_02.position.set(-50,50,50),scene.add(light_02),light_03=new THREE.PointLight(5592405,.1,100),light_03.position.set(-50,50,-50),scene.add(light_03),render()}function generateElement(e,t,o){if(null!=e){var n=numShards.map(0,100,.4,1e-4),r=Math.random()*n,a=Math.random();a=a>.7?3:2;var i=Math.random()*a;i=Math.floor(i);var s=new THREE.TetrahedronGeometry(r,i);console.log(t);var d=new THREE.Color(t[0],t[1],t[2]),h=new THREE.MeshPhongMaterial({color:d,shininess:1e3,shading:THREE.FlatShading,wireframe:!0,wireframeLinewidth:2,reflectivity:10}),l=new THREE.Mesh(s,h);shardRotation.push(Math.random(-3,3));var m=Math.random()+.5,c=.5*Math.random()+.75,g=.5*Math.random()+1;l.position.set(m,c,g),shards.push(l),scene.add(l)}}function getMousePosition(e){void 0==e&&(e=window.event),e.pageX||e.pageY?(mouse_x_pos=e.pageX,mouse_y_pos=e.pageY):(e.clientX||e.clientY)&&(mouse_x_pos=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,mouse_y_pos=e.clientY+document.body.scrollTop+document.documentElement.scrollTop)}function render(){onRenderFcts.push(function(){renderer.render(scene,camera)});var e=renderer.domElement;logoContainer.appendChild(e);var t=null;requestAnimationFrame(function o(e){t=t||e-1e3/60;var o=Math.min(200,e-t);t=e,onRenderFcts.forEach(function(t){t(o/1e3,e/1e3)}),generateImagefromCanvas()})}function rotateShards(){for(var e=0;e<shards.length;e++)shards[e].rotation.x-=SPEED*shardRotation[e],shards[e].rotation.y-=SPEED,shards[e].rotation.z-=SPEED*shardRotation[e]}var logoContainer,printOutputContainer,logo_width,logo_height,onRenderFcts=[],renderer,scene,camera,controls,shards=[],numShards=games.length,shardRotation=[],light_ambient,light_01,light_02,light_03,light_mouse,chars=[];Number.prototype.map=function(e,t,o,n){return(this-e)*(n-o)/(t-e)+o};var renderButton=document.getElementById("renderButton");renderButton.addEventListener("click",function(){var e=document.getElementById("canvasWidth").value,t=document.getElementById("canvasHeight").value;if(268435456>=e*t){for(getText();logoContainer.hasChildNodes();)logoContainer.removeChild(logoContainer.lastChild);init()}else alert("maximum render size exceeded, please choose smaller dimensions (width * height < 268435456)")}),init(),window.addEventListener("resize",function(){setLogoSize(),renderer.setSize(logo_width,logo_height),camera.aspect=logo_width/logo_height,camera.updateProjectionMatrix()},!1),document.onmousemove=getMousePosition;var mouse_x_pos=0,mouse_y_pos=0,SPEED=.01;