function setLogoSize(){logoContainer=document.getElementById("logoContainer"),logo_width=1004,logo_height=650;var e=document.getElementById("canvasWidth").value,t=document.getElementById("canvasHeight").value;e>0&&t>0&&(logo_width=e,logo_height=t)}function findGameIndexByName(e){for(var t=0;t<games.length;t++)if(e.toLowerCase()==games[t].name.toLowerCase()){return t;break}}function getText(){textfield=textfieldOriginal=document.getElementById("textfield").value,textfield=textfield.toLowerCase(),textfield=textfield.replace("/[A-Za-z0-9 -_.À-ÖØ-öø-ÿ]",""),chars=textfield.split(""),numShards=chars.length>0?chars.length:5}function hslToRgb(e,t,o){var n,a,r;if(0==t)n=a=r=o;else{var i=function l(e,t,o){return 0>o&&(o+=1),o>1&&(o-=1),1/6>o?e+6*(t-e)*o:.5>o?t:2/3>o?e+(t-e)*(2/3-o)*6:e},d=.5>o?o*(1+t):o+t-o*t,s=2*o-d;n=i(s,d,e+1/3),a=i(s,d,e),r=i(s,d,e-1/3)}return[Math.round(255*n),Math.round(255*a),Math.round(255*r)]}function generateImagefromCanvas(){var e,t,o=document.getElementById("outputContainer");try{for(e=renderer.domElement.toDataURL();o.hasChildNodes();)o.removeChild(o.lastChild)}catch(n){return void alert("Sorry, this browser does not support taking screenshot of 3d context. Try Safari or Chrome.")}t=document.createElement("img"),t.setAttribute("class","outputImage"),t.src=e,o.appendChild(t)}function init(){setLogoSize(),renderer=new THREE.WebGLRenderer({antialias:!0,alpha:!0,preserveDrawingBuffer:!0}),renderer.setSize(logo_width,logo_height),scene=new THREE.Scene,camera=new THREE.PerspectiveCamera(45,logo_width/logo_height,.01,1e3),camera.position.x=1,camera.position.y=1,camera.position.z=3;for(var e=0;e<chars.length;e++){var t=chars[e].charCodeAt(0);if(t=parseInt(t),t>=97&&122>=t){var o=t.map(97,122,0,1);console.log(t+" "+o)}else{console.log("not a lowercase character or an umlaut");var o=Math.random()}var n=(72*Math.random()+28)/100,a=(36*Math.random()+46)/100,r=hslToRgb(o,Math.random(),Math.random());generateElement(e,r,o)}light_ambient=new THREE.AmbientLight(2039325),scene.add(light_ambient),light_01=new THREE.PointLight(986895,.1,100),light_01.position.set(50,-50,-5),scene.add(light_01),light_02=new THREE.PointLight(5592405,.1,100),light_02.position.set(-50,50,50),scene.add(light_02),light_03=new THREE.PointLight(5592405,.1,100),light_03.position.set(-50,50,-50),scene.add(light_03);var i=document.createElement("canvas"),d=i.getContext("2d");i.width=2e3,i.height=1e3,d.font="Bold 100px Helvetica",d.fillStyle="white",d.fillText(textfieldOriginal,0,100);var s=new THREE.Texture(i);s.needsUpdate=!0;var l=new THREE.PlaneGeometry(1,.5),h=new THREE.MeshBasicMaterial({map:s,overdraw:.5,transparent:!0}),m=new THREE.Mesh(l,h);m.position.x=1.45,m.position.y=.6,m.position.z=2;var c=document.getElementById("showname").checked;c&&scene.add(m);var g="logo_white_outline.png",u=new THREE.TextureLoader;u.load(g,function(e){var t=new THREE.PlaneGeometry(.4,.4/1.904761905),o=new THREE.MeshBasicMaterial({map:e,overdraw:.5,transparent:!0}),n=new THREE.Mesh(t,o),a=document.getElementById("centered").checked;a?(n.position.x=1,n.position.y=1,n.position.z=2):(n.position.x=.65,n.position.y=1.2,n.position.z=2);var r=document.getElementById("showlogo").checked;console.log(r),r&&scene.add(n),render()})}function generateElement(e,t,o){if(null!=e){var n=numShards.map(0,25,.4,1e-4),a=Math.random()*n,r=Math.random();r=r>.7?3:2;var i=Math.random()*r;i=Math.floor(i);var d=new THREE.TetrahedronGeometry(a,i);console.log(t);var s=new THREE.Color(t[0],t[1],t[2]),l=new THREE.MeshPhongMaterial({color:s,shininess:1e3,shading:THREE.FlatShading,wireframe:!0,wireframeLinewidth:2,reflectivity:10}),h=new THREE.Mesh(d,l);shardRotation.push(Math.random(-3,3));var m=2*Math.random(),c=Math.random()+.5,g=.5*Math.random()+1;h.position.set(m,c,g);var u=Math.random(),E=Math.random(),p=Math.random();h.rotation.x=u,h.rotation.y=E,h.rotation.z=p,shards.push(h),scene.add(h)}}function getMousePosition(e){void 0==e&&(e=window.event),e.pageX||e.pageY?(mouse_x_pos=e.pageX,mouse_y_pos=e.pageY):(e.clientX||e.clientY)&&(mouse_x_pos=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,mouse_y_pos=e.clientY+document.body.scrollTop+document.documentElement.scrollTop)}function render(){onRenderFcts.push(function(){renderer.render(scene,camera)});var e=renderer.domElement;logoContainer.appendChild(e);var t=null;requestAnimationFrame(function o(e){t=t||e-1e3/60;var o=Math.min(200,e-t);t=e,onRenderFcts.forEach(function(t){t(o/1e3,e/1e3)}),generateImagefromCanvas()})}function rotateShards(){for(var e=0;e<shards.length;e++)shards[e].rotation.x-=SPEED*shardRotation[e],shards[e].rotation.y-=SPEED,shards[e].rotation.z-=SPEED*shardRotation[e]}var logoContainer,printOutputContainer,logo_width,logo_height,textfield="Your Name",textfieldOriginal="Your Name",onRenderFcts=[],renderer,scene,camera,controls,shards=[],numShards=games.length,shardRotation=[],light_ambient,light_01,light_02,light_03,light_mouse,chars=[];Number.prototype.map=function(e,t,o,n){return(this-e)*(n-o)/(t-e)+o};var renderButton=document.getElementById("renderButton");renderButton.addEventListener("click",function(){var e=document.getElementById("canvasWidth").value,t=document.getElementById("canvasHeight").value;if(268435456>=e*t){for(getText();logoContainer.hasChildNodes();)logoContainer.removeChild(logoContainer.lastChild);init()}else alert("maximum render size exceeded, please choose smaller dimensions (width * height < 268435456)")}),init(),window.addEventListener("resize",function(){setLogoSize(),renderer.setSize(logo_width,logo_height),renderer.setPixelRatio(4*window.devicePixelRatio),camera.aspect=logo_width/logo_height,camera.updateProjectionMatrix()},!1),document.onmousemove=getMousePosition;var mouse_x_pos=0,mouse_y_pos=0,SPEED=.01;